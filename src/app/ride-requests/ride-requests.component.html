<div class="requests-container">
  <div *ngIf="loading" class="loading">
    Loading requests...
  </div>


  <div *ngIf="error" class="error">
    {{ error }}
  </div>

  <div *ngIf="!loading && !error">
    <!-- Incoming Requests -->
    <section class="requests-section">
      <h2>Incoming Requests</h2>
      <div *ngIf="openRequests.length === 0" class="no-requests">
        No open requests available.
      </div>
      <div class="request-list">
        <div *ngFor="let request of openRequests" class="request-card">
          <div class="request-info">
            <h3>Request from {{ request.user.name }}</h3>
            <p>Ride: {{ request.ride.departure_location }} → {{ request.ride.destination_location }}</p>
            <p>Date: {{ request.ride.departure_time | date:'dd.MM.yyyy HH:mm' }} Uhr</p>
          </div>
          <div class="request-actions">
            <button (click)="handleRequest(request.id, 'accept')" class="accept">
              Accept
            </button>
            <button (click)="handleRequest(request.id, 'reject')" class="reject">
              Reject
            </button>
          </div>
        </div>
      </div>
    </section>

    <!-- My Sent Requests -->
    <section class="requests-section">
      <h2>My Sent Requests</h2>
      <div *ngIf="myRequests.length === 0" class="no-requests">
        No sent requests available.
      </div>
      <div class="request-list">
        <div *ngFor="let request of myRequests" class="request-card">
          <div class="request-info">
            <h3>Ride: {{ request.ride.departure_location }} → {{ request.ride.destination_location }}</h3>
            <p>Date: {{ request.ride.departure_time | date:'dd.MM.yyyy HH:mm' }} Uhr</p>
            <p>Status: {{ request.status === 'pending' ? 'Pending' : 
                         request.status === 'accepted' ? 'Accepted' : 'Rejected' }}</p>
          </div>
        </div>
      </div>
    </section>
  </div>
</div>